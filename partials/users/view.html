<div class="panel panel-default" ng-class="{highlight: ($ctrl.highlight == '' || $ctrl.highlight == 'true')}">
    <div class="panel-body">
        <div class="photo-scoped">
            <div class="extra-space-below profile-image">
                <span class="glyphicon glyphicon-pencil icon-on-image" ng-show="$ctrl.showEdit"></span>
                <img ng-show="$ctrl.showEdit" class="img-rounded clickable" ng-src="{{$ctrl.user.imageUrl | orDefaultImage}}" data-toggle="modal" data-target="#user-{{$ctrl.user.id}}-image-chooser">
                <img ng-hide="$ctrl.showEdit" class="img-rounded" ng-src="{{$ctrl.user.imageUrl | orDefaultImage}}">
            </div>
            <div>
                <div class="row extra-space-below">
                    <div class="col-xs-12">
                        <span class="quick-action" ng-show="$ctrl.showEdit">
                            <button ng-click="$ctrl.onEdit($ctrl.user)" type="button" class="btn btn-info btn-sm">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            </button>
                        </span>
                        <span class="quick-action" ng-show="$ctrl.showRemove">
                            <button ng-hide="$ctrl.confirmRemove" ng-click="$ctrl.onRemove($ctrl.user)" type="button" class="btn btn-danger btn-sm">
                                <span class="glyphicon glyphicon-{{$ctrl.deleteIcon}}" aria-hidden="true"></span>
                            </button>
                            <button ng-show="$ctrl.confirmRemove" type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#user-{{$ctrl.user.id}}-delete-confirm">
                                <span class="glyphicon glyphicon-{{$ctrl.deleteIcon}}" aria-hidden="true"></span>
                            </button>
                        </span>
                    </div>
                </div>
                <div class="text-info">
                    <span ng-click="$ctrl.onSelect($ctrl.user)" ng-class="['lead', {clickable: $ctrl.showSelect}]">{{$ctrl.user.firstName}} {{$ctrl.user.lastName}}<span ng-hide="$ctrl.hideRole != undefined"> | {{$ctrl.user.roleLabel()}}</span></span>
                    <span ng-show="$ctrl.user.admin" class="text-info glyphicon glyphicon-certificate" aria-hidden="true"></span>
                    <span class="badge">{{$ctrl.badge}}</span>
                </div>
                <div ng-show="$ctrl.user.email"><span class="text-muted small">email:</span> <span>{{$ctrl.user.email}}</span></div>
                <div ng-show="$ctrl.user.phoneNumber"><span class="text-muted small">Phone number:</span> <span>{{$ctrl.user.phoneNumber}}</span></div>
                <h4 ng-show="$ctrl.user.address"><small>Address</small>
                    <address>
                        {{$ctrl.user.address.line1}}<br>
                        <span ng-show="$ctrl.user.address.line2">{{$ctrl.user.address.line2}}<br></span>
                        {{$ctrl.user.address.city}}, {{$ctrl.user.address.region}} {{$ctrl.user.address.postalCode}}<br>
                    </address>
                </h4>
            </div>
        </div>
    </div>
    <confirm-box title="Delete user" on-yes="$ctrl.onRemove()" modal-id="user-{{$ctrl.user.id}}-delete-confirm">
        <p>Are you sure you want to delete this user?</p>
    </confirm-box>

    <image-chooser
            title="{{$ctrl.user.fullName()}}"
            modal-id="user-{{$ctrl.user.id}}-image-chooser"
            current-image="$ctrl.user.imageUrl"
            on-save-image="$ctrl.uploadImage(file)"
            on-clear-image="$ctrl.clearImage()">
    </image-chooser>
</div>
